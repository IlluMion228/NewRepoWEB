@model WEB.Models.Booking

<div class="card shadow-sm" style="background-color: rgba(255, 255, 255, 0.3); border-radius: 10px;">
    <div class="card-header bg-primary text-white" style="border-top-left-radius: 10px; border-top-right-radius: 10px">
        <h1 class="card-title">Online Taxi Booking</h1>
        <p class="card-text">Please fill in the form correctly to book a taxi online.</p>
        </div>

    <div class="card-body" >
        <form asp-action="Index" method="post">
            <div class="row mb-3">
                <div class="col-md-6">  
                    <label asp-for="FirstName" class="form-label"></label>
                    <input asp-for="FirstName" class="form-control" />
                    <span asp-validation-for="FirstName" class="text-danger"></span>
                </div>
                <div class="col-md-6">
                    <label asp-for="LastName" class="form-label"></label>
                    <input asp-for="LastName" class="form-control" />
                    <span asp-validation-for="LastName" class="text-danger"></span>
                </div>
            </div>

            <div class="mb-3">
                <label asp-for="PhoneNumber" class="form-label"></label>
                <input asp-for="PhoneNumber" class="form-control" placeholder="(000) 000-0000"
                       title="Format: (000) 000-0000" data-bs-toggle="tooltip" />
                <span asp-validation-for="PhoneNumber" class="text-danger"></span>
            </div>

            <div class="mb-3">
                <label asp-for="Email" class="form-label"></label>
                <input asp-for="Email" class="form-control" />
                <span asp-validation-for="Email" class="text-danger"></span>
            </div>

            <div class="mb-3">
                <label asp-for="Address" class="form-label"></label>
                <input asp-for="Address" class="form-control" />
                <span asp-validation-for="Address" class="text-danger"></span>
            </div>

            <div class="mb-3">
                <label asp-for="AddressLine2" class="form-label"></label>
                <input asp-for="AddressLine2" class="form-control" />
            </div>

            <div class="mb-3">
                <label asp-for="PromoCode" class="form-label">Promo Code (Optional)</label>
                <input asp-for="PromoCode" class="form-control"  />
            </div>


            <div class="row mb-3">
                <div class="col-md-4">
                    <label asp-for="City" class="form-label"></label>
                    <input asp-for="City" class="form-control" />
                    <span asp-validation-for="City" class="text-danger"></span>
                </div>
                <div class="col-md-4">
                    <label asp-for="State" class="form-label"></label>
                    <input asp-for="State" class="form-control" />
                    <span asp-validation-for="State" class="text-danger"></span>
                </div>
                <div class="col-md-4">
                    <label asp-for="PostalCode" class="form-label"></label>
                    <input asp-for="PostalCode" class="form-control" />
                    <span asp-validation-for="PostalCode" class="text-danger"></span>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Will you return with us?</label>
                <div class="form-check">
                    <input asp-for="ReturnWithUs" class="form-check-input" type="radio" value="true" />
                    <label class="form-check-label">Yes</label>
                </div>
                <div class="form-check">
                    <input asp-for="ReturnWithUs" class="form-check-input" type="radio" value="false" />
                    <label class="form-check-label">No</label>
                </div>
                <span asp-validation-for="ReturnWithUs" class="text-danger"></span>
            </div>

            <div class="mb-3">
                <label asp-for="FarePrice" class="form-label">Taxi Fare Prices</label>
                <select asp-for="FarePrice" class="form-select">
                    <option value="0-10">0 - 10 Km Taxi Fare ($5.00)</option>
                    <option value="0-10-return">0 - 10 Km Taxi Fare (Return Included, $10.00)</option>
                    <option value="11-20">11 - 20 Km Taxi Fare ($10.00)</option>
                    <option value="11-20-return">11 - 20 Km Taxi Fare (Return Included, $20.00)</option>
                    <option value="21-40">21 - 40 Km Taxi Fare ($25.00)</option>
                    <option value="21-40-return">21 - 40 Km Taxi Fare (Return Included, $50.00)</option>
                </select>
                <span asp-validation-for="FarePrice" class="text-danger"></span>
            </div>

            <div class="d-flex justify-content-between">
                <button type="submit" class="btn btn-success">Book a Taxi</button>
                <button type="button" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#extraFeaturesModal">
                    Choose Extra Features
                </button>
                <button type="reset" class="btn btn-secondary">Reset</button>
            </div>
        </form>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="extraFeaturesModal" tabindex="-1" aria-labelledby="extraFeaturesModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-warning text-dark">
                <h5 class="modal-title" id="extraFeaturesModalLabel">Choose Extra Features</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="extraFeaturesForm">
                    <div class="form-check">
                        <input type="checkbox" name="selectedExtras" value="Extra Luggage" class="form-check-input" id="extraLuggage">
                        <label for="extraLuggage" class="form-check-label">Extra Luggage</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" name="selectedExtras" value="Child Seat" class="form-check-input" id="childSeat">
                        <label for="childSeat" class="form-check-label">Child Seat</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" name="selectedExtras" value="Priority Pickup" class="form-check-input" id="priorityPickup">
                        <label for="priorityPickup" class="form-check-label">Priority Pickup</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" name="selectedExtras" value="Wheelchair Accessible Vehicle" class="form-check-input" id="wheelchair">
                        <label for="wheelchair" class="form-check-label">Wheelchair Accessible Vehicle</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" name="selectedExtras" value="Skip Extras" class="form-check-input" id="skip">
                        <label for="skip" class="form-check-label">Skip extras</label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="saveExtrasBtn">Save Extras</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<style>
    #extraFeaturesModal .modal-body label {
        color: black;
    }
</style>
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        document.getElementById("saveExtrasBtn").addEventListener("click", function () {
            const selectedExtras = Array.from(document.querySelectorAll("#extraFeaturesForm input[name='selectedExtras']:checked"))
                .map(input => input.value);

            let extrasField = document.getElementById("extrasField");
            if (!extrasField) {
                extrasField = document.createElement("input");
                extrasField.type = "hidden";
                extrasField.name = "ExtraFeatures";
                extrasField.id = "extrasField";
                document.querySelector("form").appendChild(extrasField);
            }

            extrasField.value = selectedExtras.join(", ");
            alert("Extras saved: " + selectedExtras.join(", "));

            const modal = bootstrap.Modal.getInstance(document.getElementById("extraFeaturesModal"));
            modal.hide();
        });
    </script>
}

